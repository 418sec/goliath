<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Goliath::Env</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Goliath.html" title="Goliath (module)">Goliath</a></span></span>
     &raquo; 
    <span class="title">Env</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Goliath::Env
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Hash</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Hash</li>
          
            <li class="next">Goliath::Env</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Constants.html" title="Goliath::Constants (module)">Constants</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/goliath/env.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Holds information for the current request.
</p>
<p>
Goliath::Env also provides access to the logger, configuration information
and anything else set into the config data during initialization.
</p>


  </div>
</div>
<div class="tags">
  
</div>
  <h2>Constant Summary</h2>
  


  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="Constants.html" title="Goliath::Constants (module)">Constants</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Constants.html#ASYNC_BODY-constant" title="Goliath::Constants::ASYNC_BODY (constant)">ASYNC_BODY</a></span>, <span class='object_link'><a href="Constants.html#ASYNC_CALLBACK-constant" title="Goliath::Constants::ASYNC_CALLBACK (constant)">ASYNC_CALLBACK</a></span>, <span class='object_link'><a href="Constants.html#ASYNC_CLOSE-constant" title="Goliath::Constants::ASYNC_CLOSE (constant)">ASYNC_CLOSE</a></span>, <span class='object_link'><a href="Constants.html#ASYNC_HEADERS-constant" title="Goliath::Constants::ASYNC_HEADERS (constant)">ASYNC_HEADERS</a></span>, <span class='object_link'><a href="Constants.html#CONFIG-constant" title="Goliath::Constants::CONFIG (constant)">CONFIG</a></span>, <span class='object_link'><a href="Constants.html#CONNECTION-constant" title="Goliath::Constants::CONNECTION (constant)">CONNECTION</a></span>, <span class='object_link'><a href="Constants.html#CONTENT_LENGTH-constant" title="Goliath::Constants::CONTENT_LENGTH (constant)">CONTENT_LENGTH</a></span>, <span class='object_link'><a href="Constants.html#CONTENT_TYPE-constant" title="Goliath::Constants::CONTENT_TYPE (constant)">CONTENT_TYPE</a></span>, <span class='object_link'><a href="Constants.html#FRAGMENT-constant" title="Goliath::Constants::FRAGMENT (constant)">FRAGMENT</a></span>, <span class='object_link'><a href="Constants.html#GOLIATH_ENV-constant" title="Goliath::Constants::GOLIATH_ENV (constant)">GOLIATH_ENV</a></span>, <span class='object_link'><a href="Constants.html#HTTP_PREFIX-constant" title="Goliath::Constants::HTTP_PREFIX (constant)">HTTP_PREFIX</a></span>, <span class='object_link'><a href="Constants.html#HTTP_VERSION-constant" title="Goliath::Constants::HTTP_VERSION (constant)">HTTP_VERSION</a></span>, <span class='object_link'><a href="Constants.html#INITIAL_BODY-constant" title="Goliath::Constants::INITIAL_BODY (constant)">INITIAL_BODY</a></span>, <span class='object_link'><a href="Constants.html#LOCALHOST-constant" title="Goliath::Constants::LOCALHOST (constant)">LOCALHOST</a></span>, <span class='object_link'><a href="Constants.html#OPTIONS-constant" title="Goliath::Constants::OPTIONS (constant)">OPTIONS</a></span>, <span class='object_link'><a href="Constants.html#PATH_INFO-constant" title="Goliath::Constants::PATH_INFO (constant)">PATH_INFO</a></span>, <span class='object_link'><a href="Constants.html#QUERY_STRING-constant" title="Goliath::Constants::QUERY_STRING (constant)">QUERY_STRING</a></span>, <span class='object_link'><a href="Constants.html#RACK_ERRORS-constant" title="Goliath::Constants::RACK_ERRORS (constant)">RACK_ERRORS</a></span>, <span class='object_link'><a href="Constants.html#RACK_INPUT-constant" title="Goliath::Constants::RACK_INPUT (constant)">RACK_INPUT</a></span>, <span class='object_link'><a href="Constants.html#RACK_LOGGER-constant" title="Goliath::Constants::RACK_LOGGER (constant)">RACK_LOGGER</a></span>, <span class='object_link'><a href="Constants.html#RACK_MULTIPROCESS-constant" title="Goliath::Constants::RACK_MULTIPROCESS (constant)">RACK_MULTIPROCESS</a></span>, <span class='object_link'><a href="Constants.html#RACK_MULTITHREAD-constant" title="Goliath::Constants::RACK_MULTITHREAD (constant)">RACK_MULTITHREAD</a></span>, <span class='object_link'><a href="Constants.html#RACK_RUN_ONCE-constant" title="Goliath::Constants::RACK_RUN_ONCE (constant)">RACK_RUN_ONCE</a></span>, <span class='object_link'><a href="Constants.html#RACK_VERSION-constant" title="Goliath::Constants::RACK_VERSION (constant)">RACK_VERSION</a></span>, <span class='object_link'><a href="Constants.html#RACK_VERSION_NUM-constant" title="Goliath::Constants::RACK_VERSION_NUM (constant)">RACK_VERSION_NUM</a></span>, <span class='object_link'><a href="Constants.html#REMOTE_ADDR-constant" title="Goliath::Constants::REMOTE_ADDR (constant)">REMOTE_ADDR</a></span>, <span class='object_link'><a href="Constants.html#REQUEST_METHOD-constant" title="Goliath::Constants::REQUEST_METHOD (constant)">REQUEST_METHOD</a></span>, <span class='object_link'><a href="Constants.html#REQUEST_PATH-constant" title="Goliath::Constants::REQUEST_PATH (constant)">REQUEST_PATH</a></span>, <span class='object_link'><a href="Constants.html#REQUEST_URI-constant" title="Goliath::Constants::REQUEST_URI (constant)">REQUEST_URI</a></span>, <span class='object_link'><a href="Constants.html#SCRIPT_NAME-constant" title="Goliath::Constants::SCRIPT_NAME (constant)">SCRIPT_NAME</a></span>, <span class='object_link'><a href="Constants.html#SERVER-constant" title="Goliath::Constants::SERVER (constant)">SERVER</a></span>, <span class='object_link'><a href="Constants.html#SERVER_NAME-constant" title="Goliath::Constants::SERVER_NAME (constant)">SERVER_NAME</a></span>, <span class='object_link'><a href="Constants.html#SERVER_PORT-constant" title="Goliath::Constants::SERVER_PORT (constant)">SERVER_PORT</a></span>, <span class='object_link'><a href="Constants.html#SERVER_SOFTWARE-constant" title="Goliath::Constants::SERVER_SOFTWARE (constant)">SERVER_SOFTWARE</a></span>, <span class='object_link'><a href="Constants.html#STATUS-constant" title="Goliath::Constants::STATUS (constant)">STATUS</a></span>, <span class='object_link'><a href="Constants.html#STREAM_CLOSE-constant" title="Goliath::Constants::STREAM_CLOSE (constant)">STREAM_CLOSE</a></span>, <span class='object_link'><a href="Constants.html#STREAM_SEND-constant" title="Goliath::Constants::STREAM_SEND (constant)">STREAM_SEND</a></span>, <span class='object_link'><a href="Constants.html#STREAM_START-constant" title="Goliath::Constants::STREAM_START (constant)">STREAM_START</a></span></p>

  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Goliath::Env) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new Goliath::Env object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#logger-instance_method" title="#logger (instance method)">- (Logger) <strong>logger</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Convenience method for accessing the rack.logger item in the environment.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_missing-instance_method" title="#method_missing (instance method)">- (Object) <strong>method_missing</strong>(name, *args, &amp;blk) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The Goliath::Env will provide any of it&#8217;s keys as a method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to%3F-instance_method" title="#respond_to? (instance method)">- (Boolean) <strong>respond_to?</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
True if the Env responds to the method, false otherwise.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_close-instance_method" title="#stream_close (instance method)">- (Object) <strong>stream_close</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
If the API is a streaming API this will be executed by the API to signal
that the stream is complete.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stream_send-instance_method" title="#stream_send (instance method)">- (Object) <strong>stream_send</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
If the API is a streaming API this will send the provided data to the
client.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace-instance_method" title="#trace (instance method)">- (Object) <strong>trace</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Add a trace timer with the given name into the environment.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#trace_stats-instance_method" title="#trace_stats (instance method)">- (Array) <strong>trace_stats</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Retrieve the tracer stats for this request environment.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Goliath::Env (class)">Goliath::Env</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create a new Goliath::Env object
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 14</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>SERVER_SOFTWARE</span><span class='rbracket'>]</span>   <span class='op'>=</span> <span class='const'>SERVER</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>SERVER_NAME</span><span class='rbracket'>]</span>       <span class='op'>=</span> <span class='const'>LOCALHOST</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_VERSION</span><span class='rbracket'>]</span>      <span class='op'>=</span> <span class='const'>RACK_VERSION_NUM</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_ERRORS</span><span class='rbracket'>]</span>       <span class='op'>=</span> <span class='const'>STDERR</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_MULTITHREAD</span><span class='rbracket'>]</span>  <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_MULTIPROCESS</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_RUN_ONCE</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='kw'>false</span>

  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:start_time</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_f'>to_f</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:time</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_f'>to_f</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:trace</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice this">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>
  
    <div class="method_details first">
  <p class="signature first" id="method_missing-instance_method">
  
    - (<tt>Object</tt>) <strong>method_missing</strong>(name, *args, &amp;blk) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The Goliath::Env will provide any of it&#8217;s keys as a method. It will
also provide any of the keys in the config object as methods. The methods
will return the value of the key. If the key doesn&#8217;t exist in either
hash this will fall back to the standard method_missing implementation.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The method to look for
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'></span>
      
      
        <span class='name'>args</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The arguments
</p>
</div>
      
    </li>
  
    <li>
      
        <span class='type'></span>
      
      
        <span class='name'>blk</span>
      
      
      
        &mdash;
        <div class='inline'><p>
A block
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 93</span>

<span class='kw'>def</span> <span class='id method_missing'>method_missing</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id blk'>blk</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id blk'>blk</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="logger-instance_method">
  
    - (<tt>Logger</tt>) <strong>logger</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Convenience method for accessing the rack.logger item in the environment.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Logger</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
The logger object
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 73</span>

<span class='kw'>def</span> <span class='id logger'>logger</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>RACK_LOGGER</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="respond_to?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>respond_to?</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
True if the Env responds to the method, false otherwise
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The method to check if we respond to it.
</p>
</div>
      
    </li>
  
</ul>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
True if the Env responds to the method, false otherwise
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 79</span>

<span class='kw'>def</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>config</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stream_close-instance_method">
  
    - (<tt>Object</tt>) <strong>stream_close</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
If the API is a streaming API this will be executed by the API to signal
that the stream is complete. This will close the connection with the
client.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 66</span>

<span class='kw'>def</span> <span class='id stream_close'>stream_close</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>STREAM_CLOSE</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id call'>call</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stream_send-instance_method">
  
    - (<tt>Object</tt>) <strong>stream_send</strong>(data) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
If the API is a streaming API this will send the provided data to the
client. There will be no processing done on the data when this is called so
it&#8217;s the APIs responsibility to have the data formatted as needed.
</p>


  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>data</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The data to send to the client.
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


60
61
62</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 60</span>

<span class='kw'>def</span> <span class='id stream_send'>stream_send</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='const'>STREAM_SEND</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="trace-instance_method">
  
    - (<tt>Object</tt>) <strong>trace</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Add a trace timer with the given name into the environment. The tracer will
provide information on the amount of time since the previous call to
<span class='object_link'><a href="#trace-instance_method" title="Goliath::Env#trace (method)">#trace</a></span> or since the Goliath::Env object was initialized.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code">trace(&quot;initialize hash&quot;)
....
trace(&quot;Do something else&quot;)</pre>
    
  </div>
<h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <span class='name'>name</span>
      
      
      
        &mdash;
        <div class='inline'><p>
The name of the trace to add
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


38
39
40
41</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 38</span>

<span class='kw'>def</span> <span class='id trace'>trace</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:trace</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%.2f</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_f'>to_f</span> <span class='op'>-</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:time</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>*</span> <span class='int'>1000</span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:time</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_f'>to_f</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="trace_stats-instance_method">
  
    - (<tt>Array</tt>) <strong>trace_stats</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Retrieve the tracer stats for this request environment. This can then be
returned in the headers hash to in development to provide some simple
timing information for the various API components.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <h3>Examples:</h3>
    
      <h4><div class='inline'></div></h4>
      <pre class="example code"><span class='lbracket'>[</span><span class='int'>200</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:meta</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:trace</span> <span class='op'>=&gt;</span> <span class='id env'>env</span><span class='period'>.</span><span class='id trace_stats'>trace_stats</span><span class='rbrace'>}</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rbracket'>]</span></pre>
    
  </div>
<h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>
Array of [name, time] pairs with a Total entry added.d
</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/goliath/env.rb', line 51</span>

<span class='kw'>def</span> <span class='id trace_stats'>trace_stats</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:trace</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>total</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:trace</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='id s'>s</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_f'>to_f</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='symbol'>:+</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Mon Apr 11 12:32:32 2011 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.4 (ruby-1.9.2).
</div>

  </body>
</html>